<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è–èª•å¿«æ¨‚ - æº«é¦¨ç¥ç¦</title>
    <style>
        /* å…¨å±€è¨­å®š */
        :root {
            --bg-top: #0f2027;
            --bg-mid: #203a43;
            --bg-bot: #2c5364;
            --snow-color: #fff;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Microsoft JhengHei', 'PingFang TC', sans-serif;
            background: linear-gradient(to bottom, var(--bg-top), var(--bg-mid), var(--bg-bot));
        }

        /* å®¹å™¨ */
        .card-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            perspective: 1000px;
        }

        /* æœˆäº® */
        .moon {
            position: absolute;
            top: 10%;
            right: 15%;
            width: 80px;
            height: 80px;
            background: #fdfcba;
            border-radius: 50%;
            box-shadow: 0 0 40px #fdfcba, 0 0 80px #fffee6;
            animation: moonFloat 10s ease-in-out infinite alternate;
            z-index: 1;
        }

        @keyframes moonFloat {
            from { transform: translateY(0); }
            to { transform: translateY(-10px); }
        }

        /* åœ°é¢é›ªæ™¯ */
        .ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 150px;
            background: linear-gradient(to top, #fff, #e6e9f0);
            border-radius: 100% 100% 0 0 / 20% 20% 0 0;
            transform: scaleX(1.5);
            z-index: 2;
            box-shadow: 0 -10px 20px rgba(255,255,255,0.3);
        }

        /* è–èª•æ¨¹å®¹å™¨ */
        .tree-container {
            position: absolute;
            bottom: 80px;
            z-index: 3;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .tree-container:hover {
            transform: scale(1.05);
        }

        .tree-container.shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        /* CSS è–èª•æ¨¹å±¤æ¬¡ */
        .tree-layer {
            width: 0;
            height: 0;
            border-left: 60px solid transparent;
            border-right: 60px solid transparent;
            border-bottom: 80px solid #1a5c37;
            position: relative;
            margin-bottom: -30px;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.3));
        }

        .tree-layer:nth-child(2) {
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            border-bottom: 70px solid #237a4b;
        }

        .tree-layer:nth-child(3) {
            border-left: 40px solid transparent;
            border-right: 40px solid transparent;
            border-bottom: 60px solid #2d995f;
        }

        /* æ¨¹å¹¹ */
        .trunk {
            width: 30px;
            height: 40px;
            background: #4a332a;
            margin: 0 auto;
            border-radius: 0 0 5px 5px;
        }

        /* æ˜Ÿæ˜Ÿè£é£¾ */
        .star-topper {
            width: 30px;
            height: 30px;
            background: #ffd700;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            position: absolute;
            top: -150px; /* Adjust based on tree height */
            left: 50%;
            transform: translateX(-50%);
            animation: shine 2s infinite alternate;
            z-index: 5;
            box-shadow: 0 0 15px #ffd700;
        }

        /* æ¨¹ä¸Šçš„è£é£¾çƒ */
        .ornament {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: red;
            box-shadow: 0 0 5px red;
            animation: twinkle 1.5s infinite alternate;
        }

        @keyframes shine {
            from { filter: drop-shadow(0 0 5px #ffd700); }
            to { filter: drop-shadow(0 0 20px #ffd700); }
        }

        @keyframes twinkle {
            from { opacity: 0.5; transform: scale(1); }
            to { opacity: 1; transform: scale(1.2); }
        }

        /* æ–‡å­—è¨Šæ¯ */
        .message-box {
            position: absolute;
            top: 15%;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: white;
            z-index: 10;
            text-shadow: 0 0 10px rgba(255,255,255,0.8);
            width: 80%;
        }

        .title {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
            opacity: 0;
            animation: fadeInDown 2s forwards 0.5s;
        }

        .subtitle {
            font-size: 1.2rem;
            font-weight: 300;
            letter-spacing: 2px;
            opacity: 0;
            border-right: 2px solid white;
            white-space: nowrap;
            overflow: hidden;
            margin: 0 auto;
            max-width: 0;
            animation: typing 3.5s steps(40, end) forwards 2s, blink .75s step-end infinite;
        }

        .hint {
            margin-top: 20px;
            font-size: 0.9rem;
            opacity: 0;
            color: rgba(255,255,255,0.7);
            animation: fadeIn 2s forwards 4s;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        @keyframes typing {
            from { max-width: 0; }
            to { max-width: 100%; }
        }

        @keyframes blink {
            from, to { border-color: transparent; }
            50% { border-color: white; }
        }

        /* é›ªèŠ±ç‰¹æ•ˆ */
        .snowflake {
            position: absolute;
            top: -10px;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            pointer-events: none;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to { transform: translateY(110vh); }
        }

        /* éŸ³æ¨‚æ§åˆ¶æŒ‰éˆ•æ¨£å¼ */
        .music-control {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.5);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            backdrop-filter: blur(5px);
        }

        .music-control:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.1);
        }

        .music-playing {
            animation: musicRotate 3s linear infinite;
            background: rgba(255, 215, 0, 0.3);
            border-color: #ffd700;
            color: #ffd700;
        }

        @keyframes musicRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* éŸ¿æ‡‰å¼èª¿æ•´ */
        @media (max-width: 600px) {
            .title { font-size: 2rem; }
            .subtitle { font-size: 1rem; white-space: normal; border: none; animation: fadeIn 2s forwards 2s; max-width: 100%; }
            .moon { width: 50px; height: 50px; right: 10%; }
            .music-control { top: 15px; right: 15px; width: 35px; height: 35px; }
            /* æ‰‹æ©Ÿç‰ˆèª¿æ•´äººç‰©ä½ç½®ï¼šé è¿‘è–èª•æ¨¹ï¼Œä¸”ç¢ºä¿ä¸è¢«é®æ“‹ */
            .person-image {
                height: 160px; 
                left: 50%; 
                /* Xè»¸åç§»ï¼š-20px è®“äººç‰©ç«™åœ¨æ¨¹çš„å·¦å´æ›´é è¿‘æ¨¹æœ¨ (å·²æ›´æ–°) */
                transform: translateX(-20px);
                bottom: 95px;
                z-index: 4; /* æé«˜å±¤ç´šï¼Œç¢ºä¿åœ¨æ¨¹çš„å‰é¢ï¼Œä¸è¢«é®æ“‹ */
            }
            /* æ–°å¢ï¼šæ‰‹æ©Ÿç‰ˆèª¿æ•´æ˜Ÿæ˜Ÿä½ç½®ï¼Œé¿å…é®æ“‹æ–‡å­— */
            .star-topper {
                top: -100px; /* å¾ -150px èª¿æ•´ç‚º -100pxï¼Œå°‡æ˜Ÿæ˜Ÿå¾€ä¸‹ç§»å‹• 50px */
            }
        }

        /* æ–°å¢ï¼šæ¼‚æµ®ç¥è³€è©æ¨£å¼ */
        .floating-wish {
            position: absolute;
            color: #ffd700;
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.5), 2px 2px 2px rgba(0,0,0,0.5);
            pointer-events: none;
            z-index: 100;
            white-space: nowrap;
            animation: floatUpFade 2s ease-out forwards;
        }

        @keyframes floatUpFade {
            0% { opacity: 0; transform: translateY(0) scale(0.5) rotate(-5deg); }
            20% { opacity: 1; transform: translateY(-30px) scale(1.2) rotate(5deg); }
            100% { opacity: 0; transform: translateY(-120px) scale(1) rotate(0deg); }
        }

        /* æ–°å¢ï¼šäººç‰©åœ–ç‰‡/å½±ç‰‡æ¨£å¼ */
        .person-image {
            position: absolute;
            left: 50%;
            /* èª¿æ•´ X è»¸ï¼šå°‡äººç‰©ç§»å‹•åˆ°è–èª•æ¨¹çš„å·¦å´ (èª¿æ•´ç‚º -40pxï¼Œä½¿å…¶æ›´é è¿‘è–èª•æ¨¹) (å·²æ›´æ–°) */
            transform: translateX(-40px); 
            bottom: 100px; /* æ”¾ç½®åœ¨é›ªåœ°ä¸Šæ–¹ */
            height: 220px; /* å¢åŠ äººç‰©é«˜åº¦ä»¥å¼·èª¿å‹•æ…‹æ•ˆæœ */
            width: auto;
            z-index: 3; /* èˆ‡æ¨¹æœ¨å’Œåœ°é¢åŒä¸€å±¤ */
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.5)); /* å¢åŠ é™°å½±ä½¿å…¶æ›´èå…¥å ´æ™¯ */
            pointer-events: none; /* è®“é»æ“Šç©¿é€åˆ°èƒŒæ™¯æˆ–æ¨¹æœ¨ */
        }

    </style>
</head>
<body>

    <div class="card-container">
        
        <!-- éŸ³æ¨‚æ§åˆ¶æŒ‰éˆ• -->
        <div class="music-control" id="musicBtn" title="æ’­æ”¾/æš«åœéŸ³æ¨‚">
            ğŸµ
        </div>

        <!-- èƒŒæ™¯éŸ³æ¨‚ -->
        <!-- é‡è¦ï¼šè«‹ç¢ºä¿ mp3 æª”æ¡ˆèˆ‡æ­¤ html æª”æ¡ˆä½æ–¼åŒä¸€è³‡æ–™å¤¾ -->
        <audio id="bgm" loop preload="auto">
            <source src="we-wish-you-a-merry-christmas-444573.mp3" type="audio/mpeg">
        </audio>

        <!-- æ–‡å­—å€åŸŸ -->
        <div class="message-box">
            <div class="title">Merry Christmas</div>
            <div class="subtitle">è¦ªæ„›çš„å°å¯¶ï¼Œé¡˜2025é€™å€‹å†¬å¤œï¼Œç™½é›ªç‚ºä½ å¸¶ä¾†å¹³å®‰èˆ‡å–œæ¨‚</div>
            <div class="hint">ï¼ˆé»æ“Šè–èª•æ¨¹ï¼Œæ–ä¸‹æ›´å¤šç¥ç¦ï¼‰</div>
        </div>

        <!-- æœˆäº® -->
        <div class="moon"></div>

        <!-- æ–°å¢ï¼šäººç‰©åœ–ç‰‡ (ä½¿ç”¨ PNG æª”) -->
        <img src="transparent_anim_1765961217613.png" 
               alt="è–èª•è³€å¡äººç‰©" 
               class="person-image" 
               onerror="this.onerror=null; this.src='https://placehold.co/220x220/000000/FFFFFF?text=Image+Placeholder'">
        
        <!-- è–èª•æ¨¹çµ„ä»¶ -->
        <div class="tree-container" id="tree">
            <div class="star-topper"></div>
            <!-- æ¨¹è‘‰å±¤ (ä¸Šåˆ°ä¸‹) -->
            <div class="tree-layer" style="display:flex; justify-content:center;">
                <!-- è£é£¾ -->
                <div class="ornament" style="left: -10px; top: 60px; background: #ff4d4d;"></div>
            </div>
            <div class="tree-layer" style="display:flex; justify-content:center;">
                 <div class="ornament" style="right: -20px; top: 60px; background: #ffff4d;"></div>
                 <div class="ornament" style="left: 0px; top: 40px; background: #4d94ff;"></div>
            </div>
            <div class="tree-layer" style="display:flex; justify-content:center;">
                <div class="ornament" style="left: -30px; top: 70px; background: #ff99cc;"></div>
                <div class="ornament" style="right: 15px; top: 50px; background: white;"></div>
            </div>
            <!-- æ¨¹å¹¹ -->
            <div class="trunk"></div>
        </div>

        <!-- åœ°é¢ -->
        <div class="ground"></div>

    </div>

    <script>
        // é›ªèŠ±ç”Ÿæˆé‚è¼¯
        function createSnowflake(isStorm = false) {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            
            // éš¨æ©Ÿå¤§å°
            const size = Math.random() * 5 + 2 + 'px';
            snowflake.style.width = size;
            snowflake.style.height = size;

            // éš¨æ©Ÿä½ç½®
            snowflake.style.left = Math.random() * 100 + 'vw';
            
            // éš¨æ©Ÿé€æ˜åº¦
            snowflake.style.opacity = Math.random() * 0.7 + 0.3;

            // å¦‚æœæ˜¯æš´é¢¨é›ªæ¨¡å¼ï¼Œé€Ÿåº¦æ›´å¿«
            const duration = isStorm ? (Math.random() * 2 + 1) + 's' : (Math.random() * 5 + 5) + 's';
            snowflake.style.animationDuration = duration;

            // åŠ å…¥ä¸€äº›æ°´å¹³æ–æ“º
            snowflake.style.transform = `translateX(${Math.random() * 20 - 10}px)`;

            document.body.appendChild(snowflake);

            // å‹•ç•«çµæŸå¾Œç§»é™¤å…ƒç´ ä»¥ç¯€çœè¨˜æ†¶é«”
            setTimeout(() => {
                snowflake.remove();
            }, isStorm ? 3000 : 10000);
        }

        // æŒçºŒä¸‹é›ª
        setInterval(() => createSnowflake(false), 200);

        // æ–°å¢ï¼šç¥è³€è©æ¸…å–®
        const wishes = [
            "ğŸ„ è–èª•å¿«æ¨‚ï¼",
            "âœ¨ å¿ƒæƒ³äº‹æˆ",
            "ğŸ ç¦®ç‰©æ»¿æ»¿",
            "ğŸ’– æ°¸é å¹´è¼•",
            "ğŸ å¹³å®‰å–œæ¨‚",
            "â›„ å†¬æ—¥æº«æš–",
            "ğŸŒŸ å¤¢æƒ³æˆçœŸ",
            "ğŸ”” ä½³ç¯€æ„‰å¿«",
            "ğŸ’– å¹¸ç¦å®‰åº·",
            "ğŸ§§ å‰ç¥¥å¦‚æ„",
            "ğŸ‰ å¥½é‹é€£é€£",
            "ğŸ€ æ¨‚é€ä¸­å¤§ç",
            "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ é—”å®¶å¹³å®‰",
            "ğŸ˜Š ç¬‘å£å¸¸é–‹",
            "ğŸ€ è¬äº‹é †å¿ƒ",
            "ğŸ’ª èº«é«”å¥åº·",
            "ğŸ¦„ å¥‡è¹Ÿé™è‡¨",
            "ğŸ­ ç”œèœœæ»¿åˆ†",
            "ğŸŒˆ å‰ç¨‹ä¼¼éŒ¦",
            "ğŸ’˜ æ„›ä½ ä¸€è¬å¹´",
            "â˜€ï¸ æº«æš–å¦‚åˆ"
        ];

        // æ–°å¢ï¼šé¡¯ç¤ºæ¼‚æµ®ç¥è³€è©å‡½å¼
        function showWish() {
            const wishText = wishes[Math.floor(Math.random() * wishes.length)];
            const wishEl = document.createElement('div');
            wishEl.classList.add('floating-wish');
            wishEl.textContent = wishText;

            // éš¨æ©Ÿä½ç½®è¨­å®š (åœ¨æ¨¹çš„ä¸Šæ–¹é™„è¿‘)
            const randomOffset = Math.random() * 100 - 50; // å·¦å³éš¨æ©Ÿåç§»
            wishEl.style.left = `calc(50% + ${randomOffset}px)`;
            wishEl.style.bottom = `${200 + Math.random() * 50}px`;
            
            // éš¨æ©Ÿé¡è‰²è®ŠåŒ– (é‡‘ã€ç´…ã€é’ã€ç™½)
            const colors = ['#ffd700', '#ff6b6b', '#4ecdc4', '#ffffff'];
            wishEl.style.color = colors[Math.floor(Math.random() * colors.length)];

            document.querySelector('.card-container').appendChild(wishEl);

            // å‹•ç•«çµæŸå¾Œç§»é™¤ DOM å…ƒç´ 
            setTimeout(() => {
                wishEl.remove();
            }, 2000);
        }

        // éŸ³æ¨‚æ§åˆ¶é‚è¼¯
        const bgm = document.getElementById('bgm');
        const musicBtn = document.getElementById('musicBtn');
        let isPlaying = false;

        function toggleMusic() {
            if (isPlaying) {
                bgm.pause();
                musicBtn.classList.remove('music-playing');
            } else {
                bgm.play().then(() => {
                    musicBtn.classList.add('music-playing');
                }).catch(e => {
                    console.log("æ’­æ”¾è¢«é˜»æ“‹æˆ–æª”æ¡ˆæœªæ‰¾åˆ°", e);
                    // éŒ¯èª¤è¨Šæ¯è¼¸å‡ºåˆ°æ§åˆ¶å°
                    if(e.name === "NotSupportedError" || e.name === "NetworkError") {
                         console.error("éŒ¯èª¤ï¼šæ‰¾ä¸åˆ°éŸ³æ¨‚æª”æ¡ˆï¼Œè«‹ç¢ºèª mp3 æª”åæ­£ç¢ºä¸”åœ¨åŒä¸€ç›®éŒ„ã€‚");
                    }
                });
            }
            isPlaying = !isPlaying;
        }

        musicBtn.addEventListener('click', (e) => {
            e.stopPropagation(); // é¿å…è§¸ç™¼å…¨å±€é»æ“Š
            toggleMusic();
        });

        // å˜—è©¦åœ¨è¼‰å…¥æ™‚ç«‹å³è‡ªå‹•æ’­æ”¾éŸ³æ¨‚
        // æ ¹æ“šç€è¦½å™¨æœ€æ–°çš„è‡ªå‹•æ’­æ”¾æ”¿ç­–ï¼Œé€™é€šå¸¸æœƒè¢«é˜»æ“‹ï¼Œç›´åˆ°ä½¿ç”¨è€…é»æ“Šé é¢ã€‚
        // å¦‚æœæ’­æ”¾æˆåŠŸï¼Œå‰‡ isPlaying æœƒè¨­ç‚º trueï¼ŒéŸ³æ¨‚åœ–æ¨™æœƒæ—‹è½‰ã€‚
        try {
            bgm.play().then(() => {
                isPlaying = true;
                musicBtn.classList.add('music-playing');
            }).catch(e => {
                console.warn("éŸ³æ¨‚è‡ªå‹•æ’­æ”¾è¢«ç€è¦½å™¨é˜»æ“‹ï¼Œéœ€è¦ä½¿ç”¨è€…é»æ“Šæ‰èƒ½æ’­æ”¾ã€‚");
                isPlaying = false;
            });
        } catch (e) {
            console.error("å˜—è©¦è‡ªå‹•æ’­æ”¾éŸ³æ¨‚æ™‚ç™¼ç”ŸéŒ¯èª¤:", e);
        }


        // é»æ“Šäº’å‹•
        const tree = document.getElementById('tree');
        tree.addEventListener('click', (e) => {
            
            // æ–æ™ƒæ¨¹
            tree.classList.add('shake');

            // æ–°å¢ï¼šé¡¯ç¤ºç¥è³€è©
            showWish();
            
            // è§¸ç™¼æš´é¢¨é›ªç‰¹æ•ˆ
            for(let i = 0; i < 50; i++) {
                setTimeout(() => createSnowflake(true), i * 50);
            }

            // ç§»é™¤æ–æ™ƒ class ä»¥ä¾¿ä¸‹æ¬¡è§¸ç™¼
            setTimeout(() => {
                tree.classList.remove('shake');
            }, 500);
        });

        // åˆå§‹åŒ–ä¸€äº›é›ªèŠ±ï¼Œè®“ç•«é¢ä¸€é–‹å§‹å°±æœ‰é›ª
        for(let i=0; i<30; i++){
            setTimeout(() => createSnowflake(false), Math.random() * 2000);
        }

    </script>
</body>
</html>